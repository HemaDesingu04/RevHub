spring.cloud.consul.host=consul
spring.cloud.consul.port=8500
spring.cloud.consul.discovery.enabled=true
spring.cloud.consul.discovery.service-name=api-gateway
spring.cloud.consul.discovery.prefer-ip-address=true
spring.cloud.consul.discovery.health-check-path=/actuator/health
spring.cloud.consul.discovery.health-check-interval=10s
spring.cloud.consul.discovery.instance-id=api-gateway-8080
spring.cloud.consul.discovery.register-health-check=true

# Disable discovery locator to avoid conflicts
spring.cloud.gateway.discovery.locator.enabled=false

# CORS Configuration
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-origins=http://localhost:4200
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-methods=*
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-headers=*
spring.cloud.gateway.globalcors.cors-configurations.[/**].allow-credentials=true

# Docker-specific routes
spring.cloud.gateway.routes[0].id=user-service
spring.cloud.gateway.routes[0].uri=http://user-service:8081
spring.cloud.gateway.routes[0].predicates[0]=Path=/api/users/**

spring.cloud.gateway.routes[8].id=auth-service
spring.cloud.gateway.routes[8].uri=http://user-service:8081
spring.cloud.gateway.routes[8].predicates[0]=Path=/api/auth/**

spring.cloud.gateway.routes[1].id=post-service
spring.cloud.gateway.routes[1].uri=http://post-service:8082
spring.cloud.gateway.routes[1].predicates[0]=Path=/api/posts/**

spring.cloud.gateway.routes[2].id=social-service
spring.cloud.gateway.routes[2].uri=http://social-service:8083
spring.cloud.gateway.routes[2].predicates[0]=Path=/api/social/**

spring.cloud.gateway.routes[3].id=chat-service
spring.cloud.gateway.routes[3].uri=http://chat-service:8084
spring.cloud.gateway.routes[3].predicates[0]=Path=/api/chat/**

spring.cloud.gateway.routes[4].id=notification-service
spring.cloud.gateway.routes[4].uri=http://notification-service:8085
spring.cloud.gateway.routes[4].predicates[0]=Path=/api/notifications/**

spring.cloud.gateway.routes[5].id=feed-service
spring.cloud.gateway.routes[5].uri=http://feed-service:8086
spring.cloud.gateway.routes[5].predicates[0]=Path=/api/feed/**

spring.cloud.gateway.routes[6].id=search-service
spring.cloud.gateway.routes[6].uri=http://search-service:8087
spring.cloud.gateway.routes[6].predicates[0]=Path=/api/search/**

spring.cloud.gateway.routes[7].id=saga-orchestrator
spring.cloud.gateway.routes[7].uri=http://saga-orchestrator:8088
spring.cloud.gateway.routes[7].predicates[0]=Path=/api/saga/**
